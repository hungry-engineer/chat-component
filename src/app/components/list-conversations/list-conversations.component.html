<div id='c21-app-list-conversations'>

  <div *ngIf="conversations.length > 0" class="c21-header">
      <div class="c21-title">{{g.PREV_CONVERSATIONS}}</div>
      <div class="c21-button" (click)="returnOpenArchivedConversation()">vedi tutte</div>
      <div class="clear"></div>
  </div>

  <div class="c21-body">
    <div *ngFor="let conversation of conversations">
      <div class="c21-item-conversation" (click)="openConversationByID(conversation)">
        <div class="c21-body-conv">
          <div class="c21-left-conv">
            <div class="c21-icon-avatar" >
              <div #avatarPlaceholder *ngIf="!conversation.image" [style.background-color]="conversation.color" class="c21-avatar-placeholder" [innerHTML]="conversation.avatar"></div>
              <div #avatarImage *ngIf="conversation.image" class="c21-avatar-image" [style.background-image]="'url(' + conversation.image + ')'"></div>
            </div>
          </div>
          <div class="c21-right-conv">
            <div class="c21-last-time">{{conversation.time_last_message}}</div>
            <div class="truncate c21-name">{{conversation.sender_fullname }}</div>
            <div [class.not-read]="conversation.is_new" class="truncate c21-msg" [innerHTML]="convertMessage(conversation.last_message_text)"></div>
          </div>
          <div *ngIf="conversation.is_new" [ngStyle] = "{ 'background-color':g.themeColor }" class="c21-divBudge">{{conversation.badge}}</div>
        </div>
        <div class="clear"></div>
      </div>
    </div>

  </div>

  
  <div class="c21-footer"> 

    <button class="c21-button-primary" (click)="openNewConversation()" [ngStyle]="{'background-color': g.themeColor, 'border-color': g.themeColor, 'color': g.themeForegroundColor }">
        <span class="v-align-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"  [ngStyle]="{'fill': g.themeForegroundColor}"/>
          </svg>
        </span>
        <span class="v-align-center c21-label-button">
          {{LABEL_START_NW_CONV}}
        </span>  
        <div class="clear"></div>
    </button>

  </div>


</div>
