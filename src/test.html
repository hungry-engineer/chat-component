<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Tilechat Widget</title>
  <base href="./">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <script type="application/javascript">
      window.tiledeskSettings = 
          {
              projectid: "5b55e806c93dde00143163dd",
              projectname: "Demo",
              development: true,
              calloutTimer: 10,
              userFullname: "Andrea Leo",
              userEmail: "andrea.leo@f21.it",
             // preChatForm: true
          };

      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id; //js.async=!0;
        js.src = "./tiledesk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'tiledesk-jssdk'));
    </script>



    <script type="application/javascript">    
    localStorage.setItem("user", "Andrea from localStorage");

      window.tileDeskAsyncInit = function() {
      window.tiledesk.on('loadParams', function(event_data) {
         window.tiledeskSettings.wellcomeMsg = " Hello at: " + new Date().toLocaleString();
         window.tiledeskSettings.userFullname = localStorage.getItem("user");
       });
       window.tiledesk.on('beforeMessageSend', function(event_data) {
         var message =  event_data.detail;
         message.attributes.pagetitle = document.title;
         message.attributes.userCompany = "Frontiere21";
       });
       window.tiledesk.on('afterMessageSend', function(event_data) {
         console.log("afterMessageSend called ", event_data);
       });
      }
    </script>

</body>
</html>
